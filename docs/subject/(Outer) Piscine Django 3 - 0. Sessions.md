# Subject 번역

> 또는 간단한 장고 프로젝트를 통해 권한 및 사용자 관리의 블랙벨트가 되는 방법도 알아보세요!

## General rules

-   당신의 프로젝트는 반드시 VM위에서 구현해야 합니다.
-   당신의 VM은 프로젝트를 완료하기 위한 필요한 모든 소프트웨어가 설치되어 있고, 설정되어 있어야 합니다.
-   VM의 운영체제는 자유롭게 선택할 수 있습니다.
-   VM을 클러스터 컴퓨터에서 사용할 수 있어야 합니다.
-   VM과 호스트 머신 간 공유 폴더를 사용해야만 합니다.
-   평가 도중, 작업물을 옮기기 위해 이 공유 폴더를 사용할 것입니다.
-   당신의 함수들은 UB를 제외하고 예기치 못하게 종료되어선 안됩니다. (Seg fault, bus error, double free 등) 발생 시, 프로젝트가 정상 동작하지 않는 것으로 간주하고 0점을 받게 됩니다.
-   제출할 필요가 없고 채점되지 않더라도, 프로젝트에 대한 테스트 프로그램을 만드는 것이 좋습니다. 이렇게 하면 자신의 작업과 동료의 작업을 쉽게 테스트할 수 있습니다. 이러한 테스트는 디펜스 중에 특히 유용합니다. 실제로 디펜스 중에는 자신의 테스트 및/또는 평가하는 동료의 테스트를 자유롭게 사용할 수 있습니다.
-   할당된 git 저장소에 작업을 제출합니다. git 저장소에 있는 작업만 채점됩니다. 작업 채점을 위해 Deepthought이 배정된 경우, 동료 평가가 끝난 후에 채점이 이루어집니다. Deepthought이 채점하는 동안 작업의 어느 부분에서든 오류가 발생하면 평가가 중지됩니다.

## 추가되는 규칙

-   장고의 LTS 버전을 사용해야 합니다.
-   원하는 부트스트랩 버전을 사용할 수 있습니다. 이 버전은 LTS 버전의 django와 함께 작동해야 합니다.
-   Python3 를 사용해야 합니다.

## Ex 00

> 예제 0: 익명 세션
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

사용자로 하여금 "프로 인생 팁"을 포스트 할 수 있게 하는 웹사이트 프로젝트를 시작할 것입니다.

프로젝트, 애플리케이션을 생성하고 이 URL `/`에 홈페이지를 설정한 후 다음과 같은 익명 세션 시스템을 구현합니다:

-   사용자는 닉네임을 가질 수 있습니다. 닉네임은 `settings.py` 에 정의된 10개의 이름들 중에서 랜덤으로 선택됩니다. 유효기간은 정의된 후 42초 입니다.
-   이 이름은 42초 동안 동일하게 유지되어야 하며 영구적이어야 합니다. 42초가 지나면 앞서 설명한 대로 이름을 다시 정의해야 합니다.
-   홈페이지 상단에 `<nav>` 요소에 메시지를 추가하는 구현 동작을 강조합니다! 이 메시지는 간단한 "Hello user!" 메시지에서 `user`를 유효기간이 끝날 때까지 임의로 지정된 이름으로 대체합니다.
-   이름은 방문 페이지에 즉각 표시되어야 합니다: 만약 이름을 나타나게 하거나 변경하기 위해 페이지를 새로고침 해야 한다면, 예제는 완료되지 않은 것 입니다!

## Ex 01

> 예제 1: 유저 생성
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `django-bootstrap*` 사용 가능

이제 익명 세션 시스템이 구현되었으니, 인증 인터페이스를 만들어 유저 관리를 추가할 차례입니다.
이 예제에서는, 이 인터페이스를 차근 차근 만들게 됩니다:

-   회원가입 페이지와 로그인 페이지를 추가하는 것으로 시작하세요. `<nav>` 요소에 각 페이지로 연결되는 링크를 추가합니다. 이를 위해 필요한 모든 URL, 템플릿, 보기 등을 추가하세요...
    -   또한 `<nav>` 요소 시작 부분에 사이트의 이름을 추가하고, 홈페이지로 링크하도록 하세요.
-   이 스펙을 만족하는 폼들을 생성하고, 페이지에 집어 넣으세요.
    -   회원가입 폼
        -   `username` 과 `password`, `password confirmation` 3가지 필드를 추가하세요.
        -   검증은 각 필드가 올바르게 채워져 있고, 주어진 이름이 이미 사용되지 않았으며, 두 비밀번호 필드가 엄격하게 동일하게 채워져 있는 경우에만 수행됩니다.
    -   로그인 폼
        -   `username` 과 `password` 2개의 필드를 추가하세요.
        -   검증은 각 필드가 채워져 있고 사용된 사용자 아이디/비밀번호 조합이 데이터베이스에 이미 존재하고 식별할 수 있는 경우에만 수행됩니다.
-   이제, 페이지 행동을 구현하세요.
    -   데이터 검증의 경우
        -   가입: 제공된 정보로 새 사용자를 생성하고 활성화합니다. 그런 다음 이 사용자와 연결하고 홈페이지로 리디렉션합니다.
        -   연결: 지정된 정보와 일치하는 사용자와 연결하고 홈페이지로 리디렉션합니다.
    -   데이터 검증에 실패하여 유효하지 않은 경우
        -   어떤 경우에도, 패스워드를 제외하고 이전에 입력했던 정보가 폼에 남아있어야 합니다.
        -   가입: 에러(비어있는 필드, 존재하는 유저, 틀린 패스워드)를 설명하는 에러 메시지를 표시하세요.
        -   로그인: 폼과 함께 에러메시지를 출력하세요. (비어있는 필드 또는 틀린 로그인 정보)
-   마침내, 유저가 로그인 한 경우:
    -   회원가입과 로그인 페이지로 가는 링크는 로그아웃으로 대체되어야 합니다. 로그아웃이 클릭 된 후에는 유저가 로그아웃되어야 하며, 홈페이지로 리다이렉트 되어야 합니다.
    -   `<nav>` 요소에 존재하는 익명 세션의 이름은 사용자의 이름으로 대체되어야 합니다.
    -   방문자는 회원가입과 로그인 페이지에 접근할 수 있어서는 안됩니다. 만약 접근하려고 시도하면, 홈페이지로 리다이렉트 되어야 합니다.
-   당연하게도, 패스워드를 타이핑할 때는 안보여야 합니다.

> 다른 예제에서는 제공된 기본 유저 클래스를 대체할 유저 클래스를 직접 만들어야 합니다.
> 프로젝트에서 이러한 변경 사항을 예상하여 코드에서 유저 클래스에 대한 호출을 수동으로 다시 작성하지 않도록 하는 것이 현명할 수 있습니다(필수는 아니지만).

## Ex 02

> 예제 2: 우리의 팁!
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

이 프로젝트의 핵심 기능을 구현할 시간이 다가왔습니다! : 팁 시스템
이걸 위해서, 다음과 같은 `Tip` 모델을 구성해야 합니다:

-   `content` 필드: 팁 컨텐츠 (당연하게도 텍스트 폼 입니다.)
-   `author` 필드: 팁의 작성자
-   `date` 필드: 팁의 생성 날짜

팁은 홈페이지에 나열되어야 하며 이 섹션에 명시된 모든 속성이 표시되어야 합니다.
로그인한 사용자는 홈페이지에 설정된 양식으로 `Tip`을 만들 수 있어야 합니다. (`modelform`을 사용하세요!)
사용자가 로그인하지 않은 경우에는 양식이 표시되지 않아야 하며 방문자가 팁을 작성할 수 없어야 합니다.

## Ex 03

> 예제 3: 투표
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

이제 팁 시스템이 준비되었으니, 최고의 팁을 모을 수 있으면 좋을 것 같습니다. 맞아요, 추천과 비추천 시스템을 만들 시간입니다!

그러기 위해서는, `Tip` 모델을 수정하여 이 기능들을 구현할 수 있습니다.
또한 흥미롭지 않다고 판단되는 팁을 삭제할 수 있는 방법을 구현해야 합니다.
홈페이지에 나열된 팁에 다음 요소를 추가해야 합니다:

-   삭제 버튼
-   추천 버튼
-   비추천 버튼
-   추천 수
-   비추천 수

현재로서는 투표나 삭제를 하려면 반드시 로그인해야 한다는 제한만 적용될 예정입니다. 사용자가 로그인하지 않은 상태에서는 이러한 작업을 수행할 수 없습니다. 이러한 각 작업은 페이지를 새로 고침합니다. 방금 생성된 팁은 당연히 추천 0표와 비추천 0표가 됩니다.

**주의**:

-   추천과 비추천을 한 팁에서 하는 행동은 불가능합니다.
-   유저는 같은 팁에 추천 또는 비추천을 한 번만 할 수 있습니다. 같은 버튼을 두 번 클릭하는 것은, 이전 행동을 취소합니다.
-   사용자가 이전에 찬성표를 던진 팁에 반대표를 던지면 찬성표는 반대표로 대체되며, 그 반대의 경우도 마찬가지입니다.

> 추천 시스템 구현을 주의 깊게 관찰하세요. 불일치, 불완전성(추천 취소 후에도 추천 수가 줄어들지 않는 경우)이 발생하면 해당 투표는 무효가 됩니다. 추천 시스템을 구현할 때는 '카운터'가 아닌 many to many 필드를 사용하는 것을 고려해야 합니다.

이 단계에서는 모든 작업이 사용자가 로그인한 경우에만 작동해야 합니다. 사용자가 사용할 수 없는 요소를 표시하거나 비활성화할 수 있어야 합니다.

## Ex 04

> 예제 4: 인가의 주 사용처
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

이제 프로젝트가 조금 더 커져서 로그인만 하면 누구나 무엇이든 할 수 있게 되었습니다. 이제 약간의 제한을 추가할 때가 되었습니다.

이제 사용자가 팁을 삭제하려면 팁을 삭제할 수 있는 권한이 필요합니다.

장고와 함께 기본적으로 제공되는 관리 인터페이스를 활성화하고 수퍼유저를 사용하여 권한을 수정하고 프로젝트의 동작을 강조 표시하세요.

물론 페이지의 "삭제" 버튼을 삭제하는 것 이상의 작업이 필요합니다(물론 이렇게 할 수는 있지만). 권한을 적절히 확인하여 이 기능을 제한하는 올바른 방법을 찾아보세요.

참고: 물론 팁 작성자는 승인 없이도 자신의 팁을 삭제할 수 있습니다. 이는 이 규칙의 유일한 예외입니다.

## Ex 05

> 예제 5: 개인화된 인가
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

비추천의 부정적인 영향을 고려할 때, 이 기능은 특정한 유저에게만 제공되어야 합니다.

이전 예제와 동일한 제어 기능을 비추천에 구현하세요.
이것은 기본 권한이 아니며 적합하지 않은 다른 권한을 사용하면 부끄러운 일이 될 수 있으므로, 비추천 사용을 제한할 수 있는 권한을 직접 만드세요!

이전 연습과 마찬가지로, 단순히 비추천 버튼을 삭제하는 것만이 능사는 아닙니다. 시도해 볼 수는 있겠죠? 하지만 성공이 보장되는 것은 아닙니다.

참고: 팁 삭제와 마찬가지로, 팁 작성자는 자신의 팁이 멍청하다고 생각되면 언제든지 자신의 팁에 비추천을 할 수 있습니다.

## Ex 06

> 예제 6: 자동화와 평판 관리
>
> `ex/` 안에 프로젝트와 `requirements.txt` 파일 제출
>
> 장고의 모든 기능과 `random`, `django-bootstrap*` 사용 가능

이제 이 프로젝트를 실행하는 데 필요한 대부분의 도구가 제공되었으므로 수동으로 권한을 관리할 필요가 없어졌습니다. 일부 사이트에서는 평판 척도로 권한을 부여하기 시작했습니다. 이는 가치 있는 사용자에게 새로운 기능을 사용할 수 있는 권한을 부여합니다! 이것이 바로 이 예제의 목적입니다. 사용자가 게시한 팁이 받은 투표 수에 따라 평판 시스템을 구축해야 합니다.

표준 유저 클래스를 나만의 유저 클래스로 바꾸세요. 이 클래스에서는 사용자의 평판에 따라 비추천 및 팁 삭제 권한이 달라지는 방식을 구현합니다. 이 사용자의 평판은 해당 사용자의 팁이 받은 추천 및 비추천 수에 따라 달라집니다.

각 새로운 유저는 0 평판 포인트에서 시작합니다. 각 추천은 5 평판 포인트씩 얻을 수 있으며, 비추천은 2 평판 포인트가 깎입니다. 만약 팁이 삭제되었다면, 해당 팁이 유저의 평판 포인트에 미치는 영향은 사라집니다.

사용자가 15개의 평판 점수를 획득하면 (자신의 팁이 아닌 다른 팁에 대한) 비추천 권한이 잠금 해제됩니다. 팁을 삭제할 수 있는 권한을 부여받으려면 평판 점수 30점이 필요합니다. 사용자의 평판이 낮아지면 평판에 따라 부여된 권한을 잃을 수 있습니다.

또한 사용자 이름이 페이지에 표시될 때 옆(괄호 사이)에 평판이 표시되도록 사용자 이름의 모양을 수정할 수 있습니다.
